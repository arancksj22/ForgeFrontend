<div class="upload-card" 
     (dragover)="onDragOver($event)"
     (drop)="onDrop($event)">
  
  @if (!selectedFile()) {
    <div class="upload-area">
      <svg class="upload-icon" viewBox="0 0 64 64" fill="none">
        <path d="M32 12V42M32 12L20 24M32 12L44 24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M12 42V52H52V42" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
      </svg>
      <h3>Drop your project here</h3>
      <p>or click to browse</p>
      <input type="file" 
             class="file-input" 
             (change)="onFileSelected($event)"
             accept=".zip,.tar,.tar.gz">
      <div class="supported-formats">
        <span class="format-badge">Maven</span>
        <span class="format-badge">npm</span>
        <span class="format-badge">pip</span>
      </div>
    </div>
  } @else {
    <div class="file-selected">
      <div class="file-info">
        <svg class="file-icon" viewBox="0 0 24 24" fill="none">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z" stroke="currentColor" stroke-width="2"/>
          <path d="M13 2v7h7" stroke="currentColor" stroke-width="2"/>
        </svg>
        <div class="file-details">
          <h4>{{ selectedFile()?.name }}</h4>
          <p>{{ ((selectedFile()?.size ?? 0) / 1024 / 1024).toFixed(2) }} MB</p>
        </div>
      </div>
      <button class="btn-ghost" (click)="clearFile()">
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </div>

    <div class="build-config">
      <label class="config-label">Build System</label>
      <div class="radio-group">
        <label class="radio-item">
          <input type="radio" name="buildType" value="maven" 
                 [checked]="buildType() === 'maven'"
                 (change)="buildType.set('maven')">
          <span>Maven</span>
        </label>
        <label class="radio-item">
          <input type="radio" name="buildType" value="npm" 
                 [checked]="buildType() === 'npm'"
                 (change)="buildType.set('npm')">
          <span>npm</span>
        </label>
        <label class="radio-item">
          <input type="radio" name="buildType" value="pip" 
                 [checked]="buildType() === 'pip'"
                 (change)="buildType.set('pip')">
          <span>pip</span>
        </label>

      </div>
    </div>

    <button class="btn-primary" 
            (click)="startBuild()"
            [disabled]="isUploading()">
      @if (isUploading()) {
        <div class="spinner"></div>
        <span>Initializing Build...</span>
      } @else {
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span>Start Build</span>
      }
    </button>
  }
</div>
